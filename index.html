
<!doctype html>
<html lang="th">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>‡πÄ‡∏Å‡∏°‡∏ä‡πà‡∏ß‡∏¢‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ô‡∏™‡∏≥‡∏•‡∏±‡∏Å‡∏≠‡∏≤‡∏´‡∏≤‡∏£ (‡∏â‡∏ö‡∏±‡∏ö‡πÄ‡∏ö‡∏∑‡πâ‡∏≠‡∏á‡∏ï‡πâ‡∏ô)</title>
  <style>
    :root {
      --bg: #f1f7ff;
      --card: #fff;
      --primary: #0b63c9;
      --accent: #10b981;
      --danger: #dc2626;
      --muted: #6b7280;
    }
    body { margin: 0; font-family: ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Noto Sans Thai", "Noto Sans", "Helvetica Neue", Arial, "Apple Color Emoji", "Segoe UI Emoji"; background: linear-gradient(#eef6ff, #e6f0ff); color: #0f172a; }
    .container { max-width: 920px; margin: 24px auto 80px; padding: 0 16px; }
    .header { display:flex; align-items:center; justify-content:space-between; gap: 8px; }
    .title { font-weight: 800; color: #0b3e91; font-size: clamp(20px, 3vw, 28px); }
    .stats { display:flex; gap: 12px; align-items:center; color:#065f46; font-weight:700; }
    .card { background: var(--card); border-radius: 16px; padding: 20px; box-shadow: 0 8px 26px rgba(0,0,0,.06); border: 1px solid #e5e7eb; }
    .btn { background: #0b63c9; color:white; border:0; border-radius: 12px; padding: 10px 16px; font-weight:700; cursor:pointer; }
    .btn.secondary { background:#eff6ff; color:#1e40af; border:1px solid #bfdbfe; }
    .btn.ghost { background:transparent; color:#1f2937; border:1px solid #e5e7eb; }
    .btn.danger { background:var(--danger); }
    .grid { display:grid; grid-template-columns: repeat(auto-fit, minmax(260px, 1fr)); gap: 12px; margin-top: 16px; }
    .choice { text-align:left; border-radius: 12px; padding: 14px; border: 1px solid #d1fae5; background:#fff; cursor:pointer; }
    .choice.wrong { border-color: #ffe4e6; }
    .hint { margin-top: 12px; background:#eff6ff; color:#1e3a8a; padding: 12px; border-radius: 10px; border:1px solid #dbeafe; }
    .row { display:flex; gap: 10px; align-items:center; flex-wrap: wrap; }
    .progress { width: 100%; height: 12px; background:#e5e7eb; border-radius: 999px; overflow:hidden; }
    .bar { height:100%; background:#10b981; width:0%; transition: width .2s; }
    .keyrow { display:grid; grid-template-columns: repeat(5, 1fr); gap:8px; margin-top:14px; }
    .key { padding:10px; text-align:center; border:1px solid #e5e7eb; border-radius:10px; background:white; font-weight:700; }
    .key.done { background:#dcfce7; border-color:#bbf7d0; }
    .muted { color: var(--muted); font-size: 14px; }
    footer { color:#6b7280; font-size:12px; margin-top:16px; }
    .msg { margin-top:10px; font-weight:700; }
    .ok { color:#047857; }
    .bad { color:#b91c1c; }
  </style>
</head>
<body>
  <div class="container">
    <div class="header">
      <div class="title">‡πÄ‡∏Å‡∏°‡∏ä‡πà‡∏ß‡∏¢‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ô‡∏™‡∏≥‡∏•‡∏±‡∏Å‡∏≠‡∏≤‡∏´‡∏≤‡∏£ (Choking Safety)</div>
      <div class="stats">
        <div>‚è±Ô∏è <span id="timer">‡∏û‡∏£‡πâ‡∏≠‡∏°</span></div>
        <div>‚úÖ ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô: <span id="score">0</span></div>
      </div>
    </div>

    <div id="screen" class="card"></div>

    <footer>
      ‡∏™‡∏∑‡πà‡∏≠‡∏Å‡∏≤‡∏£‡∏™‡∏≠‡∏ô‡∏ô‡∏µ‡πâ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏Å‡∏≤‡∏£‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏£‡∏π‡πâ‡πÄ‡∏ö‡∏∑‡πâ‡∏≠‡∏á‡∏ï‡πâ‡∏ô‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÄ‡∏î‡πá‡∏Å‡∏õ‡∏£‡∏∞‡∏ñ‡∏° ‡∏Ñ‡∏£‡∏π‡∏Ñ‡∏ß‡∏£‡∏Å‡∏≥‡∏Å‡∏±‡∏ö‡∏î‡∏π‡πÅ‡∏•‡∏Ç‡∏ì‡∏∞‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡πÄ‡∏™‡∏°‡∏≠
    </footer>
  </div>

  <script>
    const screens = {
      INTRO: "intro",
      CHOICES: "choices",
      QTE: "qte",
      WIN: "win",
      FAIL: "fail"
    };
    const seq = ["LEFT","RIGHT","LEFT","RIGHT","LEFT"];
    let state = {
      screen: screens.INTRO,
      score: 0,
      calledAdult: false,
      qteIndex: 0,
      timeLeft: 15,
      timer: null,
      message: ""
    };

    const el = {
      screen: document.getElementById("screen"),
      timer: document.getElementById("timer"),
      score: document.getElementById("score"),
    };

    function setScreen(name) {
      state.screen = name;
      render();
      if (name === screens.QTE) startTimer();
      else stopTimer();
    }

    function startTimer() {
      state.timeLeft = 15;
      el.timer.textContent = state.timeLeft + "s";
      stopTimer();
      state.timer = setInterval(() => {
        state.timeLeft--;
        el.timer.textContent = state.timeLeft + "s";
        if (state.timeLeft <= 0) {
          stopTimer();
          setScreen(screens.FAIL);
          state.message = "‡∏´‡∏°‡∏î‡πÄ‡∏ß‡∏•‡∏≤! ‡∏•‡∏≠‡∏á‡πÉ‡∏´‡∏°‡πà‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏ô‡∏∞";
          render();
        }
      }, 1000);
    }
    function stopTimer() {
      if (state.timer) clearInterval(state.timer);
      state.timer = null;
      if (state.screen !== screens.QTE) el.timer.textContent = "‡∏û‡∏£‡πâ‡∏≠‡∏°";
    }

    function render() {
      el.score.textContent = state.score;
      if (state.screen === screens.INTRO) {
        el.screen.innerHTML = `
          <p style="font-size:18px; line-height:1.6">
            ‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á‡∏û‡∏±‡∏Å‡∏Å‡∏•‡∏≤‡∏á‡∏ß‡∏±‡∏ô ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ô‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏Å‡∏¥‡∏ô‡∏Ç‡πâ‡∏≤‡∏ß‡πÅ‡∏•‡πâ‡∏ß‡∏à‡∏π‡πà ‡πÜ ‡∏Å‡πá <b style="color:#b91c1c">‡πÑ‡∏≠‡πÅ‡∏£‡∏á ‡πÜ ‡∏ô‡πâ‡∏≥‡∏ï‡∏≤‡∏Ñ‡∏•‡∏≠</b> ‡∏î‡∏π‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô‡∏à‡∏∞‡∏™‡∏≥‡∏•‡∏±‡∏Å!
          </p>
          <ul class="muted">
            <li>‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢: ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏Å‡∏≤‡∏£‡∏ä‡πà‡∏ß‡∏¢‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡∏ó‡∏µ‡πà <b>‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á‡πÅ‡∏•‡∏∞‡∏õ‡∏•‡∏≠‡∏î‡∏†‡∏±‡∏¢</b></li>
            <li>‡∏ñ‡πâ‡∏≤‡πÑ‡∏≠‡πÑ‡∏î‡πâ ‡πÉ‡∏´‡πâ <b>‡πÑ‡∏≠‡πÅ‡∏£‡∏á ‡πÜ</b></li>
            <li>‡πÄ‡∏£‡∏µ‡∏¢‡∏Å <b>‡∏Ñ‡∏£‡∏π/‡∏ú‡∏π‡πâ‡πÉ‡∏´‡∏ç‡πà</b> ‡∏°‡∏≤‡∏ä‡πà‡∏ß‡∏¢</li>
            <li>‡∏ñ‡πâ‡∏≤‡∏¢‡∏±‡∏á‡∏ï‡∏¥‡∏î‡∏Ñ‡∏≠‡∏≠‡∏¢‡∏π‡πà ‚Üí ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ä‡πà‡∏ß‡∏¢‡∏î‡∏±‡∏ô‡∏ó‡πâ‡∏≠‡∏á (‡∏à‡∏≥‡∏•‡∏≠‡∏á‡πÉ‡∏ô‡πÄ‡∏Å‡∏°)</li>
          </ul>
          <div class="row" style="margin-top:12px">
            <button class="btn" onclick="setScreen(screens.CHOICES)">‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÄ‡∏Å‡∏°</button>
            <button class="btn secondary" onclick="resetScore()">‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô</button>
          </div>
        `;
      }

      if (state.screen === screens.CHOICES) {
        el.screen.innerHTML = `
          <h2 style="color:#0b3e91; margin:0 0 8px 0">‡∏Ñ‡∏∏‡∏ì‡∏à‡∏∞‡∏ó‡∏≥‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÑ‡∏£‡∏î‡∏µ?</h2>
          <div class="grid">
            <div class="choice" onclick="choiceCorrect('‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á! ‡∏ñ‡πâ‡∏≤‡πÑ‡∏≠‡πÑ‡∏î‡πâ ‡πÉ‡∏´‡πâ‡πÑ‡∏≠‡πÅ‡∏£‡∏á ‡πÜ ‡∏Å‡πà‡∏≠‡∏ô', 20)">‡∏ö‡∏≠‡∏Å‡πÉ‡∏´‡πâ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ô "‡πÑ‡∏≠‡πÅ‡∏£‡∏á ‡πÜ"</div>
            <div class="choice wrong" onclick="choiceWrong('‡πÑ‡∏°‡πà‡∏õ‡∏•‡∏≠‡∏î‡∏†‡∏±‡∏¢ ‡πÄ‡∏á‡∏¢‡∏´‡∏ô‡πâ‡∏≤‡∏´‡∏£‡∏∑‡∏≠‡∏î‡∏∑‡πà‡∏°‡∏ô‡πâ‡∏≥‡∏≠‡∏≤‡∏à‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡πÅ‡∏¢‡πà‡∏•‡∏á')">‡πÄ‡∏á‡∏¢‡∏´‡∏ô‡πâ‡∏≤‡∏™‡∏π‡∏á ‡πÜ ‡πÅ‡∏•‡∏∞‡∏î‡∏∑‡πà‡∏°‡∏ô‡πâ‡∏≥‡πÄ‡∏¢‡∏≠‡∏∞ ‡πÜ</div>
            <div class="choice wrong" onclick="choiceWrong('‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å ‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ‡∏à‡∏±‡∏á‡∏´‡∏ß‡∏∞‡πÅ‡∏•‡∏∞‡πÄ‡∏ó‡∏Ñ‡∏ô‡∏¥‡∏Ñ‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á')">‡∏ï‡∏ö‡∏´‡∏•‡∏±‡∏á‡πÅ‡∏£‡∏á ‡πÜ ‡πÅ‡∏ö‡∏ö‡∏™‡∏∏‡πà‡∏°‡∏´‡∏•‡∏≤‡∏¢‡∏Ñ‡∏£‡∏±‡πâ‡∏á</div>
            <div class="choice" onclick="callAdult()">‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡∏Ñ‡∏£‡∏π/‡∏ú‡∏π‡πâ‡πÉ‡∏´‡∏ç‡πà</div>
          </div>
          <div class="hint">
            ‡πÄ‡∏Ñ‡∏•‡πá‡∏î‡∏•‡∏±‡∏ö: ‡∏ñ‡πâ‡∏≤‡∏¢‡∏±‡∏á‡∏™‡∏≥‡∏•‡∏±‡∏Å‡∏≠‡∏¢‡∏π‡πà‡πÅ‡∏•‡∏∞‡∏û‡∏π‡∏î‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ ‡πÉ‡∏´‡πâ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ä‡πà‡∏ß‡∏¢‡∏î‡∏±‡∏ô‡∏ó‡πâ‡∏≠‡∏á‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏õ‡∏•‡∏≠‡∏î‡∏†‡∏±‡∏¢ (‡πÉ‡∏ô‡πÄ‡∏Å‡∏°‡∏à‡∏∞‡∏à‡∏≥‡∏•‡∏≠‡∏á‡∏î‡πâ‡∏ß‡∏¢‡∏Å‡∏≤‡∏£‡∏Å‡∏î‡∏õ‡∏∏‡πà‡∏°‡∏•‡∏π‡∏Å‡∏®‡∏£‡∏ã‡πâ‡∏≤‡∏¢-‡∏Ç‡∏ß‡∏≤‡∏ï‡∏≤‡∏°‡∏à‡∏±‡∏á‡∏´‡∏ß‡∏∞)
          </div>
          <div class="row" style="margin-top:12px">
            <button class="btn" onclick="beginQTE()">‡πÑ‡∏õ‡∏ä‡πà‡∏ß‡∏¢‡∏î‡∏±‡∏ô‡∏ó‡πâ‡∏≠‡∏á (‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏†‡∏≤‡∏£‡∏Å‡∏¥‡∏à)</button>
            <button class="btn ghost" onclick="resetGame()">‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÉ‡∏´‡∏°‡πà</button>
          </div>
          <div class="msg ${state.message ? (state.messageOK ? 'ok':'bad') : ''}">${state.message || ""}</div>
        `;
      }

      if (state.screen === screens.QTE) {
        const items = seq.map((d,i)=>`<div class="key ${i < state.qteIndex ? 'done':''}">${d}</div>`).join("");
        el.screen.innerHTML = `
          <div class="row" style="justify-content:space-between">
            <h2 style="color:#0b3e91; margin:0">‡∏†‡∏≤‡∏£‡∏Å‡∏¥‡∏à‡∏î‡∏±‡∏ô‡∏ó‡πâ‡∏≠‡∏á (‡∏Å‡∏î ‡∏ã‡πâ‡∏≤‡∏¢-‡∏Ç‡∏ß‡∏≤ ‡∏ï‡∏≤‡∏°‡∏•‡∏≥‡∏î‡∏±‡∏ö)</h2>
            <div class="muted">‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡πÄ‡∏ß‡∏•‡∏≤: <b>${state.timeLeft}s</b></div>
          </div>
          <div class="progress" style="margin-top:10px"><div class="bar" id="bar" style="width:${(state.qteIndex/seq.length)*100}%"></div></div>
          <p class="muted">‡∏•‡∏≥‡∏î‡∏±‡∏ö‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏î: ${seq.join(" ‚Üí ")} | ‡πÉ‡∏ä‡πâ‡∏Ñ‡∏µ‡∏¢‡πå‡∏ö‡∏≠‡∏£‡πå‡∏î: Arrow Left / Arrow Right</p>
          <div class="keyrow">${items}</div>
          <p class="muted" style="margin-top:8px">‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏õ‡∏•‡∏≠‡∏î‡∏†‡∏±‡∏¢: ‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡∏ú‡∏π‡πâ‡πÉ‡∏´‡∏ç‡πà‡∏ó‡∏∏‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á ‡∏´‡∏≤‡∏Å‡∏ú‡∏π‡πâ‡∏õ‡πà‡∏ß‡∏¢‡πÑ‡∏°‡πà‡∏´‡∏≤‡∏¢‡πÉ‡∏à‡∏´‡∏£‡∏∑‡∏≠‡∏´‡∏°‡∏î‡∏™‡∏ï‡∏¥ ‡πÉ‡∏´‡πâ‡πÇ‡∏ó‡∏£‡∏â‡∏∏‡∏Å‡πÄ‡∏â‡∏¥‡∏ô</p>
        `;
      }

      if (state.screen === screens.WIN) {
        el.screen.innerHTML = `
          <h2 style="color:#047857; margin:0 0 8px 0">üéâ ‡∏ä‡πà‡∏ß‡∏¢‡πÑ‡∏î‡πâ‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à!</h2>
          <p>‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ô‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡∏´‡∏≤‡∏¢‡πÉ‡∏à‡πÑ‡∏î‡πâ‡πÅ‡∏•‡πâ‡∏ß ‡∏Ñ‡∏∏‡∏ì‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏Å‡∏≤‡∏£‡∏Å‡∏£‡∏∞‡∏ó‡∏≥‡∏ó‡∏µ‡πà‡∏õ‡∏•‡∏≠‡∏î‡∏†‡∏±‡∏¢ ${state.calledAdult ? "‡πÅ‡∏•‡∏∞‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡∏ú‡∏π‡πâ‡πÉ‡∏´‡∏ç‡πà‡πÑ‡∏î‡πâ‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á" : ""}.</p>
          <div class="row" style="margin-top:12px">
            <button class="btn" onclick="resetGame()">‡πÄ‡∏•‡πà‡∏ô‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á</button>
            <button class="btn secondary" onclick="setScreen(screens.CHOICES)">‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏õ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô</button>
          </div>
        `;
      }

      if (state.screen === screens.FAIL) {
        el.screen.innerHTML = `
          <h2 style="color:#b91c1c; margin:0 0 8px 0">‡∏¢‡∏±‡∏á‡∏ä‡πà‡∏ß‡∏¢‡πÑ‡∏°‡πà‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à</h2>
          <p>‡∏≠‡∏¢‡πà‡∏≤‡∏Å‡∏±‡∏á‡∏ß‡∏• ‡∏•‡∏≠‡∏á‡πÉ‡∏´‡∏°‡πà‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡πÑ‡∏î‡πâ‡πÄ‡∏™‡∏°‡∏≠ ‡∏à‡∏≥‡πÑ‡∏ß‡πâ‡∏ß‡πà‡∏≤‡∏ï‡πâ‡∏≠‡∏á <b>‡∏ö‡∏≠‡∏Å‡πÉ‡∏´‡πâ‡πÑ‡∏≠</b> ‡πÅ‡∏•‡∏∞ <b>‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡∏ú‡∏π‡πâ‡πÉ‡∏´‡∏ç‡πà</b> ‡∏Å‡πà‡∏≠‡∏ô‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ä‡πà‡∏ß‡∏¢‡∏î‡∏±‡∏ô‡∏ó‡πâ‡∏≠‡∏á</p>
          <div class="row" style="margin-top:12px">
            <button class="btn" onclick="beginQTE()">‡∏•‡∏≠‡∏á‡∏†‡∏≤‡∏£‡∏Å‡∏¥‡∏à‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á</button>
            <button class="btn secondary" onclick="resetGame()">‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÉ‡∏´‡∏°‡πà</button>
          </div>
          <div class="msg bad">${state.message || ""}</div>
        `;
      }
    }

    function choiceCorrect(msg, addScore) {
      state.score += addScore || 10;
      state.message = msg;
      state.messageOK = true;
      render();
    }
    function choiceWrong(msg) {
      state.score = Math.max(0, state.score - 5);
      state.message = msg;
      state.messageOK = false;
      render();
    }
    function callAdult() {
      if (!state.calledAdult) state.score += 10;
      state.calledAdult = true;
      state.message = "‡∏î‡∏µ‡∏°‡∏≤‡∏Å! ‡πÉ‡∏´‡πâ‡∏ú‡∏π‡πâ‡πÉ‡∏´‡∏ç‡πà‡∏°‡∏≤‡∏ä‡πà‡∏ß‡∏¢‡∏ï‡∏£‡∏ß‡∏à‡∏î‡∏π‡∏Ñ‡∏ß‡∏≤‡∏°‡∏õ‡∏•‡∏≠‡∏î‡∏†‡∏±‡∏¢";
      state.messageOK = true;
      render();
    }
    function beginQTE() {
      state.qteIndex = 0;
      setScreen(screens.QTE);
    }
    function resetScore(){ state.score = 0; render(); }
    function resetGame(){
      stopTimer();
      state = { screen: screens.INTRO, score: 0, calledAdult:false, qteIndex:0, timeLeft:15, timer:null, message:\"\" };
      render();
    }

    window.addEventListener("keydown", (e) => {
      if (state.screen !== screens.QTE) return;
      const want = seq[state.qteIndex];
      const key = e.key;
      const ok = (want === "LEFT" && key === "ArrowLeft") || (want === "RIGHT" && key === "ArrowRight");
      if (ok) {
        state.qteIndex++;
        const bar = document.getElementById("bar");
        if (bar) bar.style.width = (state.qteIndex/seq.length)*100 + "%";
        if (state.qteIndex >= seq.length) {
          state.score += 100 + (state.calledAdult ? 20 : 0);
          setScreen(screens.WIN);
        } else {
          render();
        }
      } else {
        state.score = Math.max(0, state.score - 5);
        render();
      }
    });

    // initial
    render();
  </script>
</body>
</html>
